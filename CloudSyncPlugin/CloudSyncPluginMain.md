git Тестирование функционала **Автоматическая загрузка папки в облачное хранилище.**

Техническое задание:


---

 Есть плагин, суть которого в том, что он синхронизирует файлы между одной конкретной папкой на твоем компе с облачным хранилищем. 
Синхронизирует только одну папку - выбирается при установке плагина. Файлы грузятся плагином на какой-то сервак, у пользователя 
имеется к ним доступ через веб интерфейс. У каждого пользователя свой набор файлов, доступ в веб интерфейс осуществляется по 
уникальной (для каждого пользователя) ссылке






![task](https://github.com/pankrys/QArepo/blob/main/CloudSyncPlugin/images/Image1.jpg "main task")



---

Спеки



1. Explorer

1.1 Должна быть реализованна возможность выбрать папку

1.2 Должна быть реализованна возможность выбрать только одну папку

1.3 Должна быть реализованна возможность выбрать папку в разных ОС

1.4 Папка должна иметь права на чтение и запись.

1.5 Размер пути к папке не должен превышать 260 символов (для Windows)

1.6 Путь к папке может содержать любые допустимые конкретной файловой системой символы (“A - z”, “A - я”, “1-0”, “_”, “-”, “/”, “.”) 

1.7 Путь к папке не должен содержать зарезервированных в системе переменных (con, lpt1-9, nul)

1.8 Должен обеспечивать как выбор папки так и ввод пути вручную

~~1.9 *Уточнить как обрабатываются symlink (должны ли мы качать такой файл?)~~

1.10 Путь к папке не должен быть пустым

1.11 Путь к папке может быть сетевым (smb://dir, host://dir)

1.12 Должна быть реализована возможность изменения папки. При смене папки должна произойти новая синхронизация с удалением 

1.13 Путь к папке может содержать пробел

1.14 Путь к папке не может состоять только из пробелов

1.15 Путь к папке не может начинаться или заканчиваться пробелом

1.16 Должна быть реализована возможность добавлять\удалять файлы и(или) вложенные папки в синхронизируемую папку



2. Cloud sync plugin.

2.1 Плагин должен обеспечивать постоянный (периодический с интервалом (добавить в тех. опис.)) опрос папки на наличие новых файлов

2.2 Плагин должен содержать список файлов и\или опрашивать веб-сервер на предмет такого списка (уточнить по тех. заданию)

2.3 Уникальность файлов должна быть обеспечена по:

2.3.1 Пути от родительской папки.

~~2.3.2 Размеру файла~~

2.3.3 Времени создания и последнего доступа.

2.3.4 Хэш-сумме файла в случае если 2.3.1 - 2.3.3 одинаковы 

2.4 Плагин должен после обнаружения несоответствия локального списка с серверным установить соединение с Cloud Storage по протоколу 
http(s) и выполнить загрузку \ выгрузку файлов

2.5 Плагин должен обеспечивать возможность автоматического перезапуска при перезагрузке \ падении (возможно запуск как службы или 
контроль должен осуществляться иной функциональностью)

2.6 Плагин должен уметь определять наличие связи с Cloud Storage

2.7 Плагин должен уметь выполнять докачку после обрыва связи

2.8 Плагин должен иметь возможность авторизации пользователя (вероятно реализуется через другой функционал)

2.9 Плагин в процессе работы должен очищать занятую память.



3. Cloud-server

3.1 Должен обеспечивать прием файлов от Cloud sync plugin

3.2 Должен обеспечивать отдачу файлов для Web server

3.3 ~~Версионность?~~

3.4~~ Резервное копирование?~~

3.5 Должен восстанавливаться после сбоя

3.6 Должен держать нагрузку согласно спеке (написать)

3.7 Должен поддерживать докачку данных

3.8 Должен работать безопасно (https)

3.9 ~~Должен распознавать MITM атаку~~

3.10 Должен блокировать изменение файла до его полной загрузки

3.11 Должен сравнивать по времени изменения два файла полученных из разных Cloud sync plugin и сохранять последний



4. Web-server

4.1 Должен по запросу от Web page получать список файлов и папок для отображения

4.2 Должен по запросу от Web page получать определенный файл для скачивания

4.3 Должен по запросу от Web page загружать файл(ы) и папки добавленные через Web page

4.4 Должен отдавать корректные страницы для ошибок (404, 403)

4.5 Не должен иметь внешний доступ к API(?)



5. Web-page

5.1 сервер должен формировать уникальную ссылку для пользователя с его папкой

5.2 пользователь должен иметь возможность зайти по ссылку с любого браузера и ОС

5.3 сервер должен генерировать get-запрос к API Cloud server и получать ссылку

5.4 пользователь должен иметь возможность загрузить файл размером не более 16GB на странице.

…

Тест-план:

	



1. draft Smoke-тест (Запуск приложения)
2. draft Тест критического пути (добавляем папку с одним файлом, идем на web-интерфейс - наблюдаем папку с этим файлом)
3. [Explorer](https://docs.google.com/document/u/0/d/1YbkG9G-gces6NoZ2Mq1EHgPnCcZmZ7g1OYjzP71iQ_g/edit) 
4. [Cloud sync plugin](https://docs.google.com/document/u/0/d/1OG_8L7U-nWjAQj4FasB9w020vOgneeDAoaniCiTUnnA/edit) (draft)
5. Cloud-server (draft)
6. WebServer (draft)
7. WebPage (draft)

	

 

Правки:

1.9 *Уточнить как обрабатываются symlink (должны ли мы качать такой файл?)

давай никак ) игнорируются, об этом магическим образом известно всем пользователям. 

3.6 Должен держать нагрузку согласно спеке (написать)

нагрузкой займется другая команда

4.5 Не должен иметь внешний доступ к API(?)

поддерживается только один гет запрос - генерирующий простую хтмл страницу со ссылками на файлы

5.1 Страница должна иметь возможность авторизации пользователя

да, но давай проверку регистрации/авторизации оставим на другой раз, пусть это будет просто уникальная для каждого пользователя 
ссылка, доступная откуда-то из основного ресурса компании к которому мы особого отношения не имеем. авторизацию в плагине они тоже 
разрабатывают и тестируют.

5.6 Ограничение на размер файла?

пусть будет 16 Гб

